<!doctype html>
<html lang="en-US"><head>
   <meta charset="utf-8">
    <!-- Chulapa Jekyll Theme -  -->
    <!--  MIT License-->
    <!-- Docs: https://dieghernan.github.io/chulapa -->
    <!-- Repo: https://github.com/dieghernan/chulapa -->
    <!-- Page build 2025-01-03 19:53:22 +0100 -->
    <!--Google Structured Data-->
    <script type="application/ld+json">
        {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://thomasburgess.github.io/2022/12/01/aoc22.html"
      },
      "headline": "Advent of Code 2022",
      "image": "https://thomasburgess.github.io/assets/images/2022/12/01/aoc2022.png",
      "datePublished": "2022-12-01T00:00:00+01:00",
      "dateModified": "2024-10-31T00:00:00+01:00",
      "author": {
        "@type": "Person",
        "name": "Thomas T Burgess"
        , "url": "https://mathstodon.xyz/@ngons"
        ,  "sameAs" : [
             "https://github.com/thomasburgess"
            ,
             "https://orcid.org/0000-0002-6993-5918"
            ]
      },
       "publisher": {
        "@type": "Organization",
        "name": "Thomas T Burgess",
        "url": "https://thomasburgess.github.io/",
        "logo": {
          "@type": "ImageObject",
          "url": "https://github.com/thomasburgess.png"
        }
      }
    }
    </script>
        <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://thomasburgess.github.io/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Blog",
        "item": "https://thomasburgess.github.io/blog"
      },
    {
        "@type": "ListItem",
        "position": 3,
        "name": "Advent of Code 2022"
      }]
    }
    </script>
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "name": "Advent of Code 2022",
    "description": "A new problem, every day, all of december. - I will do this years Advent of Code 2022 in vanilla (only included libraries)  python 3.11. I&#39;ve joined the challenge a few times before - but never finished.  Let&#39;s see how many days I manage this round :D
"
    }
}
</script><script type="application/ld+json">
{
  "@context" : "https://schema.org",
  "@type" : "Person",
  "image": "https://github.com/thomasburgess.png",
  "homeLocation": {
    "@type": "Place",
    "name": "Vienna, Austria"
    },
  "description": "Publisher",
  "name" : "Thomas T Burgess",
  "url" : "https://thomasburgess.github.io/"
  ,  "sameAs" : [
  "https://mathstodon.xyz/@ngons",
  "https://github.com/thomasburgess",
  "https://orcid.org/0000-0002-6993-5918"
  ]
}
</script>
   <title>Advent of Code 2022 | Thomas T Burgess's Blog</title>
  <link rel="canonical" href="https://thomasburgess.github.io/2022/12/01/aoc22.html">
    <!-- Atom feed -->
  <link href="https://thomasburgess.github.io/atom.xml" type="application/atom+xml" rel="alternate" title="Atom feed Thomas T Burgess's Blog" >
    <!-- RSS 2.0 feed -->
  <link href="https://thomasburgess.github.io/rss.xml" type="application/rss+xml" rel="alternate" title="RSS 2.0 feed Thomas T Burgess's Blog" >
    <!-- Meta tags -->
   <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
   <meta name="author" content="Thomas T Burgess" >
   <meta name="copyright" content="Thomas T Burgess" >
   <meta name="description" content="A new problem, every day, all of december. - I will do this years Advent of Code 2022 in vanilla (only included libraries)  python 3.11. I&#39;ve joined the ...">
   <meta name="thumbnail" content="https://thomasburgess.github.io/assets/images/2022/12/01/aoc2022.png" >
   <meta name="robots" content="index, follow"><meta name="keywords" content="">
    <!-- OpenGraph -->
   <meta property="og:title" content="Advent of Code 2022 | Thomas T Burgess's Blog" >
   <meta property="og:site_name" content="Thomas T Burgess's Blog | Numbers, numbers - everywhere!" >
   <meta property="og:url" content="https://thomasburgess.github.io/2022/12/01/aoc22.html" >
   <meta property="og:type" content="website" >
   <meta property="og:description" content="A new problem, every day, all of december. - I will do this years Advent of Code 2022 in vanilla..." >
   <meta property="og:locale" content="en-US" >
   <meta property="og:image" content="https://thomasburgess.github.io/assets/images/2022/12/01/aoc2022.png" >
    <!-- Twitter/X Cards -->
   <meta name="twitter:card" content="summary_large_image"><!-- start custom head snippets -->
<!-- this script is inserted before the css stylesheet -->
<!-- end custom head snippets -->
<!-- CSS -->
    <!-- Preconnect with Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Fontawesome-->
    <!-- v6 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css">
  <link rel="preload" href="https://cdn.jsdelivr.net/gh/dieghernan/chulapa@master/assets/js/chulapa_script.js" as="script" >
  <link rel="preload" href="https://cdn.jsdelivr.net/gh/dieghernan/chulapa@master/assets/fonts/Chulapa/Chulapa-Bold_vmod.otf" as="font" type="font/otf" crossorigin>
    <!-- Theme css (Bootstrap included) -->
  <link rel="stylesheet" id="maincss" href="https://thomasburgess.github.io/assets/css/main.css" >
    <!-- Highlighter -->
  <link id="csshigh" rel="stylesheet" href="https://thomasburgess.github.io/assets/css/highlighter.css" >
    <!-- Custom css -->
  <link rel="stylesheet" href="https://thomasburgess.github.io/assets/css/custom.css" >
      <!-- start custom head snippets -->
<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="96x96" href="/assets/images/favicons/favicon-96x96.png">
<link rel="manifest" href="/assets/images/favicons/site.webmanifest">
<link rel="mask-icon" href="/assets/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
<link rel="shortcut icon" href="/assets/images/favicons/favicon.ico">
<meta name="msapplication-TileColor" content="#2b5797">
<meta name="msapplication-TileImage" content="/assets/images/favicons/mstile-144x144.png">
<meta name="msapplication-config" content="/assets/images/favicons/browserconfig.xml">
<meta name="theme-color" content="#78c2ad">
<!-- end custom head snippets --></head>
<body class="d-flex flex-column h-entry" id="body">
	<a class="u-url d-none" href="https://thomasburgess.github.io/2022/12/01/aoc22.html">Invisible link to canonical for Microformats</a>
	<div class="navbar-chulapa-fab d-md-none">
		<input type="checkbox" class="navbar-chulapa-fab-button d-none" id="navi-toggle">
		<label for="navi-toggle" class="navbar-toggler p-1 m-0 text-center d-flex">
			<span class="navbar-toggler-icon m-auto">&nbsp;</span>
		</label>
		<div class="navbar-chulapa-fab-background">&nbsp;</div>
		<nav class="navbar-chulapa-fab-nav" aria-label="alternative-navigation">
			<ul class="navbar-nav text-center text-uppercase font-weight-light mt-0 mb-1 py-1">
				<li class="nav-item">
					<a class="nav-link px-3 navbar-brand mx-1 " href="https://thomasburgess.github.io/"><img src="https://thomasburgess.github.io/assets/images/favicons/favicon-96x96.png" width="30" height="30" class="d-inline-block align-top rounded-lg text-center mr-1" alt="NavbarLogo">Home</a>
				</li><li class="nav-item my-0 py-1">
					<a class="nav-link px-3 py-1" href="https://thomasburgess.github.io/blog/">Blog</a>
				</li><li class="nav-item my-0 py-1">
					<a class="nav-link px-3 py-1" href="https://thomasburgess.github.io/tags">Tags</a>
				</li><li class="nav-item my-0 py-1">
					<a class="nav-link px-3 py-1" href="https://thomasburgess.github.io/categories">Categories</a>
				</li><li class="nav-item my-0 py-1">
					<a class="nav-link px-3 py-1" href="https://thomasburgess.github.io/archive">Archive</a>
				</li><li class="nav-item my-0 py-1">
					<a class="nav-link px-3 py-1 " href="https://thomasburgess.github.io/search">search</a>
				</li></ul>
		</nav>
	</div>
	<nav class="navbar navbar-expand sticky-top navbar-chulapa d-none d-md-block " aria-label="primary-navigation">
	<div class="container-fluid mx-md-2">
			<a class="navbar-brand text-uppercase font-weight-light" href="https://thomasburgess.github.io/"><img src="https://thomasburgess.github.io/assets/images/favicons/favicon-96x96.png" width="30" height="30" class="d-inline-block align-top rounded-lg mr-1" alt="NavbarLogo">Home</a><ul class="navbar-nav ml-auto"><li class="nav-item mx-2">
						<a class="nav-link text-uppercase font-weight-light " href="https://thomasburgess.github.io/blog/">Blog</a>
					</li><li class="nav-item mx-2">
						<a class="nav-link text-uppercase font-weight-light " href="https://thomasburgess.github.io/tags">Tags</a>
					</li><li class="nav-item mx-2">
						<a class="nav-link text-uppercase font-weight-light " href="https://thomasburgess.github.io/categories">Categories</a>
					</li><li class="nav-item mx-2">
						<a class="nav-link text-uppercase font-weight-light " href="https://thomasburgess.github.io/archive">Archive</a>
					</li><li class="nav-item mx-2">
						<a class="nav-link text-uppercase font-weight-light " href="https://thomasburgess.github.io/search">
							<i class="fa fa-search" aria-hidden="true"></i><span class="sr-only">search</span>
						</a>
					</li></ul></div>
</nav>	<header class="d-flex align-items-center hero-chulapa-image" style="background-image: linear-gradient(rgba(0, 0, 0, 0.15), rgba(0, 0, 0, 0.7)), url('https://thomasburgess.github.io/assets/images/2022/12/01/aoc2022.png')"><div class="container-lg py-4">
   <h1 class="p-name">Advent of Code 2022</h1><hr class="my-3">
   <p class="chulapa-subtitle p-summary">A new problem, every day, all of december.</p>
   <div class="btn-group-vertical btn-group-lg mt-2 text-center" role="group">
      <a href="https://github.com/thomasburgess/advent2022" class="btn chulapa-btn-project" role="button" aria-disabled="true">
                <i class="fab fa-github fa-lg mr-2"></i>View on Github</a>
   </div>
 </div>
</header>
	<main class="container-lg pb-3 flex-fill">
<div class="row my-1">
<div class="col-lg-5 offset-lg-2 col small">
 <nav aria-label="breadcrumb">
  <ol class="breadcrumb my-0 py-0 chulapa-bg-transparent pl-0" itemscope itemtype="https://schema.org/BreadcrumbList">
            <li class="breadcrumb-item" itemprop="itemListElement" itemscope
          itemtype="https://schema.org/ListItem"><a href="https://thomasburgess.github.io/" itemprop="item"><span itemprop="name">Home</span></a>
         <meta itemprop="position" content="1" ></li>
            <li class="breadcrumb-item" itemprop="itemListElement" itemscope
          itemtype="https://schema.org/ListItem"><a href="https://thomasburgess.github.io/blog" itemprop="item"><span itemprop="name">Blog</span></a>
         <meta itemprop="position" content="2" ></li>
      <li class="breadcrumb-item active" aria-current="page" itemprop="itemListElement" itemscope
          itemtype="https://schema.org/ListItem">
        <span itemprop="name">Advent of Code 2022</span>
       <meta itemprop="position" content="3" >
     </li>
 </ol>
 </nav>
 <div class="chulapaDateSocial">
            <time class="dt-updated" datetime="2024-10-31T00:00:00+01:00">31 oct 2024</time> 
            <i class="fa fa-redo fa-xs" aria-hidden="true"></i>
            <br>
            <span class="font-weight-light chulapa-text-line-through">01 dec 2022</span>
        </div></div>
         <div class="col-lg-3 col-sm-4 col-3 text-right lead chulapaDateSocial">
            <a  href="https://twitter.com/intent/tweet?url=https://thomasburgess.github.io/2022/12/01/aoc22.html&text=Advent+of+Code+2022&hashtags=coding,advent,python" title="Share on X" aria-label="Share on X" ><i class="fab fa-square-x-twitter fa-lg" aria-hidden="true"></i></a>
            <a href="https://toot.kytta.dev/?text=Advent%20of%20Code%202022%20https://thomasburgess.github.io/2022/12/01/aoc22.html%20%23coding%20%23advent%20%23python" title="Share on Mastodon" aria-label="Share on Mastodon"><i class="fa-brands fa-mastodon fa-lg" aria-hidden="true"></i></a>
            <a  class="d-none d-sm-inline" href="https://www.facebook.com/sharer.php?u=https://thomasburgess.github.io/2022/12/01/aoc22.html" title="Share on Facebook" aria-label="Share on Facebook" ><i class="fab fa-facebook-square fa-lg" aria-hidden="true"></i></a>
             <a  class="d-none d-sm-inline" href="https://api.whatsapp.com/send?&text=Advent+of+Code+2022%20https://thomasburgess.github.io/2022/12/01/aoc22.html" title="Share on Whatsapp" aria-label="Share on Whatsapp" ><i class="fab fa-whatsapp-square fa-lg" aria-hidden="true"></i></a>
         <a  class="d-none d-sm-inline" href="https://www.linkedin.com/shareArticle?url=https://thomasburgess.github.io/2022/12/01/aoc22.html&title=Advent+of+Code+2022" title="Share on LinkedIn" aria-label="Share on LinkedIn"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
         </div></div>
		<div class="row pt-2">
			<aside class="col-lg-2 mt-lg-3 small"><div rel="author" class="h-card p-author">
				<div class="row d-flex align-items-center mb-2"><img src="https://github.com/thomasburgess.png" alt="Thomas T Burgess" class="ml-3 mr-0 mx-lg-auto mb-lg-1 chulapa-avatar-size u-photo"><div class="col-9 col-lg-12 text-lg-center p-name">
						Thomas T Burgess
					</div>
				</div>
				<div class="row mb-2 mb-lg-0">
					<div class="col text-lg-center"><address class="d-inline d-lg-block mr-2 mx-lg-auto mb-lg-2 small chulapa-links-hover-only">
						  <a class="pr-lg-0 p-region" href="https://www.google.com/maps/search/?api=1&query=Vienna%2C+Austria">
						    <i class="fas fa-map-marker-alt fa-lg mr-1" aria-hidden="true"></i>Vienna, Austria</a>
						</address><div class="d-inline my-1 mx-lg-0 chulapa-links-hover-only"><a class="mr-2 mx-lg-1 u-url" rel="me" href="https://mathstodon.xyz/@ngons" title="@ngons@mathstodon.xyz - my mastodon social" aria-label="@ngons@mathstodon.xyz - my mastodon social" ><i class="fab fa-mastodon fa-lg" aria-hidden="true"></i></a><a class="mr-2 mx-lg-1 u-url" rel="me" href="https://github.com/thomasburgess" title="my code at github." aria-label="my code at github." ><i class="fab fa-github fa-lg" aria-hidden="true"></i></a><a class="mr-2 mx-lg-1 u-email" href="mailto:nxpnsv+thomastburgess@gmail.com?subject=Thomas%20T%20Burgess's%20Blog%20web%20-%20Advent%20of%20Code%202022" title="My personal email" aria-label="My personal email" ><i class="far fa-envelope fa-lg" aria-hidden="true"></i></a>
							<a class="mr-2 mx-lg-1 u-url" rel="me" href="https://orcid.org/0000-0002-6993-5918" title="My Orcid" aria-label="My Orcid" ><i class="fa-brands fa-orcid fa-lg" aria-hidden="true"></i></a></div></div>
				</div>
				</div>
</aside>
			<article id="maincontent" class="col-lg-8 mt-3 e-content">
	<button class="btn btn-primary btn-sm rounded-right position-fixed chulapa-btn-sidebar bs-canvas-anim chulapa-btn-nofocus chulapa-fa-static" id='demo' onclick="openSideBar()" aria-label="Open Sidebar" aria-expanded="false" aria-controls="sideBar">
		<i class="fa-solid fa-plus"></i><span class="sr-only">Open Sidebar</span>
	</button>
	<div class="bs-canvas bs-canvas-anim bs-canvas-left position-fixed navbar-chulapa h-100" id='sideBar'>
		<p class="pt-2 pb-1 px-3">
			<button type="button" class="navbar-text close chulapa-btn-nofocus chulapa-fa-static" aria-label="Close" onclick="closeSideBar()">
				<i class="fa-solid fa-times"></i><span class="sr-only">Close Sidebar</span>
			</button>
		</p>
		<nav class="navbar-nav px-3 my-auto">		  <p class="mb-2" ><a class="nav-link font-weight-bold lead" href="#">Advent of Code 2022</a></p>		
			<ul class="nav flex-column" id="sidetoc"><li class="nav-item nav d-block"><a href="#template" class="nav-link">Template</a></li><li class="nav-item nav d-block"><a href="#learnings" class="nav-link">Learnings</a></li></ul>
		</nav>   
	</div>
            <nav aria-label="table-of-contents">
			<ul class="chulapa-toc-wrapper list-group mb-5 mx-3 mx-lg-5" id="toc"><li class="list-group-item font-weight-bold py-1 pr-0 mr-0 chulapa-toc-reset"><a href="#template">Template</a></li><li class="list-group-item font-weight-bold py-1 pr-0 mr-0 chulapa-toc-reset"><a href="#learnings">Learnings</a></li></ul>
			</nav>
			 <h1 id="advent-of-code-2022">Advent of Code 2022</h1>
<p>I will do this years <a href="https://adventofcode.com/2022">Advent of Code 2022</a> in vanilla 
(only included libraries) python 3.10.4. Iâ€™ve joined the challenge a few times before - 
but never finished. Letâ€™s see how many days I manage this round :D</p>
<ul>
 <li><em>Update 1: the answer is 16, December is such a busy month :)</em></li>
 <li><em>Update 2: <a href="/2023/12/01/advent2023.html">see my post on AoC 2023</a></em></li>
</ul>
<p><strong>NOTE</strong>: This blog contains spoilers - use it responsibly.</p>
<p>Iâ€™ve hidden the details for each day behind <code class="highlighter-rouge">expand details</code> blocks if you want to see 
only some solutions.</p>
<p>While my solutions do not use external libraries, I sometimes add graphics made with 
<a href="https://matplotlib.org">matplotlib</a>.</p>
<h3 id="template">Template</h3>
<p>In general, these tasks require input data to be read in and be processed in two 
different parts. Here is the pathon template I use to get started:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python
# -*- coding: utf-8 -*-
</span><span class="s">"""Advent of code day XX - """</span>

<span class="k">def</span> <span class="nf">read_data</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>


<span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="k">return</span>


<span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">list</span><span class="p">):</span>
    <span class="k">return</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">DAY</span> <span class="o">=</span> <span class="s">"XX"</span>
    <span class="n">exdata</span> <span class="o">=</span> <span class="n">read_data</span><span class="p">(</span><span class="sa">f</span><span class="s">"day</span><span class="si">{</span><span class="n">DAY</span><span class="si">}</span><span class="s">_example.txt"</span><span class="p">)</span>
    <span class="n">indata</span> <span class="o">=</span> <span class="n">read_data</span><span class="p">(</span><span class="sa">f</span><span class="s">"day</span><span class="si">{</span><span class="n">DAY</span><span class="si">}</span><span class="s">_input.txt"</span><span class="p">)</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"PART 1"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">example"</span><span class="p">,</span> <span class="n">part1</span><span class="p">(</span><span class="n">exdata</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">input"</span><span class="p">,</span> <span class="n">part1</span><span class="p">(</span><span class="n">indata</span><span class="p">))</span>

    <span class="k">print</span><span class="p">(</span><span class="s">"PART 2"</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">example"</span><span class="p">,</span> <span class="n">part2</span><span class="p">(</span><span class="n">exdata</span><span class="p">))</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"</span><span class="se">\t</span><span class="s">input"</span><span class="p">,</span> <span class="n">part2</span><span class="p">(</span><span class="n">indata</span><span class="p">))</span>
</code></pre></div></div>
<p>Iâ€™ll keep my code on this 
<a href="https://github.com/thomasburgess/advent2022">github repository</a>, most of the code will 
appear in this blog post.</p>
<h3 id="learnings">Learnings</h3>
<p>I learned a few useful things on these challenges so far:</p>
<ul>
 <li><a href="https://docs.python.org/3.8/library/itertools.html#itertools.takewhile"><code class="highlighter-rouge">itertools.takewhile</code></a> - Iterate while predicate is True</li>
 <li>The sign of x: <code class="highlighter-rouge">(x &gt; 0) - (x &lt; 0)</code></li>
 <li>Transpose for list of lists: <code class="highlighter-rouge">tuple(zip(*data))</code></li>
 <li>Like <code class="highlighter-rouge">sum(x)</code> but for products: <code class="highlighter-rouge">functools.reduce(operator.mul, x, 1)</code></li>
 <li>The use of <a href="https://docs.python.org/3/library/functools.html#functools.cmp_to_key"><code class="highlighter-rouge">functools.cmp_to_key</code></a> and key functions to change how <code class="highlighter-rouge">sort</code>, <code class="highlighter-rouge">max</code>, and similar functions work in python</li>
 <li>To get both max and min over two dimensions of data like <code class="highlighter-rouge">[(x0, y0), (x1, y1), ...]</code> one can use <code class="highlighter-rouge">(min0, max0),(min1, max1) = map(lambda x: (min(x), max(x)), zip(*data))</code></li>
 <li>Itâ€™s easy and useful to print unicode characters <code class="highlighter-rouge">sand="ðŸŸ¨"</code></li>
 <li><a href="https://docs.python.org/3/library/re.html#functions"><code class="highlighter-rouge">re.split</code></a> is a great when parsing text input</li>
</ul>
<h2 id="day-01---counting-calories">Day 01 - Counting calories</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/1">AOC2 Day 01 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day01.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day01 solution</i><br />&nbsp;<br /></summary>
 <p>Lines in a group have a single integer, blank lines separate groups.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1000
2000
3000

4000

5000
6000

7000
8000
9000

10000
</code></pre></div></div>
 <p><code class="highlighter-rouge">read_sums</code> parses the data, aggregates groups, and returns the list of sums.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_sums</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># Start with single empty sum
</span>    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">.</span><span class="n">strip</span><span class="p">():</span>
                <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>  <span class="c1"># Add new empty sum
</span>                <span class="k">continue</span>
            <span class="n">result</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Task: Find the group with the largest sum.</p>
 <p>Solution: Take the maximum of the list of sums</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">max</span><span class="p">(</span><span class="n">read_sums</span><span class="p">(</span><span class="s">"day01_input.txt"</span><span class="p">))</span>
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>Task: Find the three largest groups.</p>
 <p>Solution: Sort the list and summing the last 3 items:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sum</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">read_sums</span><span class="p">(</span><span class="s">"day01_input.txt"</span><span class="p">))[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])</span>
</code></pre></div></div>
</details>
<h2 id="day-02---rock-paper-scissors">Day 02 - Rock Paper Scissors</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/2">AOC Day 02 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day02.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day02 solution</i><br />&nbsp;<br /></summary>
 <p>Data: rows with games, the first column is the opponent move, and the second is the 
player move.</p>
 <p>Move encoding: Rock, paper, and scissors is A, B, C for opponent, and X, Y, Z for player.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>A Y
B X
C Z
</code></pre></div></div>
 <p><code class="highlighter-rouge">read_strats</code> parses the data and converts character representation to 0, 1, 2</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_strats</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"A"</span><span class="p">),</span> <span class="nb">ord</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"X"</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">())</span>
        <span class="p">]</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Task: Count score for rock paper scissors games.</p>
 <p>Score: Player move (1 for rock, 2 for paper, and 3 for scissors), plus 0 for loss, 3 for
draw and 6 for win.</p>
 <p>The <code class="highlighter-rouge">score</code> function computes the score for a single game:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">score</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="p">[[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">3</span><span class="p">]][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</code></pre></div></div>
 <p>With this the total score is</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="n">strats</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">i</span><span class="p">:</span> <span class="n">score</span><span class="p">(</span><span class="o">*</span><span class="n">i</span><span class="p">),</span> <span class="n">strats</span><span class="p">))</span>
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>Task: count score as above but now the second column states X=loss, Y=draw, Z=win.</p>
 <p>Using <code class="highlighter-rouge">transform</code> the second column is transformed to the old format:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]][</span><span class="n">j</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
</code></pre></div></div>
 <p>and then the total score (using part1 on the transformed data) is</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="n">strats</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">part1</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">transform</span><span class="p">(</span><span class="o">*</span><span class="n">x</span><span class="p">)),</span> <span class="n">strats</span><span class="p">))</span>
</code></pre></div></div>
</details>
<h2 id="day-03---rucksack-reorganization">Day 03 - Rucksack Reorganization</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/3">AOC Day 03 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day03.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day03 solution</i><br />&nbsp;<br /></summary>
 <p>Each row of data is a rucksack with a string of characters <code class="highlighter-rouge">[a-zA-Z]</code>.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vJrwpWtwJgWrhcsFMMfFFhFp
jqHRNqRjqzjGDLGLrsFMfFZSrLrFZsSL
PmmdzqPrVvPwwTWBwg
wMqvLMZHhHMvwLHjbvcjnnSBnvTQFn
ttgJtRGJQctTZtZT
CrZsJsPPZsGzwwsLwLmpwMDw
</code></pre></div></div>
 <p>Each character corresponds to a priority: a=1,â€¦, z=27, A=27,â€¦, Z=52.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">priority</span><span class="p">(</span><span class="n">c</span><span class="p">:</span> <span class="nb">chr</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"A"</span><span class="p">)</span> <span class="o">+</span> <span class="mi">27</span><span class="p">)</span> <span class="k">if</span> <span class="n">c</span><span class="p">.</span><span class="n">isupper</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"a"</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>
 <p>With this sack data is read with <code class="highlighter-rouge">read_sacks</code>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_sacks</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="n">priority</span><span class="p">,</span> <span class="n">line</span><span class="p">.</span><span class="n">strip</span><span class="p">())))</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Task: sum priority of items unique in first and second half of rucksack.</p>
 <p>Part 1 is solved by summing the set intersections of the first and second part of the 
sacks:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="n">sacks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">]).</span><span class="n">intersection</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span> <span class="p">:])),</span> <span class="n">sacks</span><span class="p">)</span>
    <span class="p">)</span>

</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>Task: sum priority of items unique to three consecutive rucksacks.</p>
 <p>This part is solved by summing the intersections of  consecutive sacks, as follows:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="n">sacks</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">sum</span><span class="p">(</span>
                <span class="nb">set</span><span class="p">(</span><span class="n">sacks</span><span class="p">[</span><span class="n">x</span><span class="p">]).</span><span class="n">intersection</span><span class="p">(</span><span class="n">sacks</span><span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]).</span><span class="n">intersection</span><span class="p">(</span><span class="n">sacks</span><span class="p">[</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="p">])</span>
            <span class="p">),</span>
            <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">sacks</span><span class="p">),</span> <span class="mi">3</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></div>
</details>
<h2 id="day-04---camp-cleanup">Day 04 - Camp Cleanup</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/4">AOC Day 04 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day04.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day04 solution</i><br />&nbsp;<br /></summary>
 <p>Each row shows a pair separated by <code class="highlighter-rouge">,</code>, each entry is a range <code class="highlighter-rouge">low-high</code>.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2-4,6-8
2-3,4-5
5-7,7-9
2-8,3-7
6-6,4-6
2-6,4-8
</code></pre></div></div>
 <p>With this sack data is read with <code class="highlighter-rouge">read_pairs</code>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_pairs</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">():</span>
            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">line</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"-"</span><span class="p">,</span> <span class="s">","</span><span class="p">).</span><span class="n">split</span><span class="p">(</span><span class="s">","</span><span class="p">))))</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Task: Count pairs where one pair fully overlaps with the other</p>
 <p>Solution: check if one pair overlaps the other in either order.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">count_contained</span><span class="p">(</span><span class="n">pairs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span>
            <span class="n">pairs</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>Task: Count overlapping pairs</p>
 <p>Solution: Check if range bounds overlap in any way</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">count_overlaps</span><span class="p">(</span><span class="n">pairs</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span>
        <span class="nb">map</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
            <span class="ow">or</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
            <span class="n">pairs</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></div>
</details>
<h2 id="day-05---supply-stacks">Day 05 - Supply Stacks</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/5">AOC Day 05 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day05.py">code link</a></li>
</ul>
<p>For me the whole challenge here was to parse the data.</p>
<details>
  <summary><i>Click to expand Day05 solution</i><br />&nbsp;<br /></summary>
 <p>The data is split into two parts separated by a blank line. In the first part, stacks of
items are listed in columns, with column index on the last row (this index can be
ignored). Items are on the form <code class="highlighter-rouge">[X]</code> where <code class="highlighter-rouge">X</code> is a single character item id. In the 
second part a sequence of moves with item count count, source column, destination column
are listed.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    [D]    
[N] [C]    
[Z] [M] [P]
 1   2   3 

move 1 from 2 to 1
move 3 from 1 to 3
move 2 from 2 to 1
move 1 from 1 to 2
</code></pre></div></div>
 <p>The two parts are read in and processed with <code class="highlighter-rouge">read_stacks</code>:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_stacks</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">chr</span><span class="p">]],</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]:</span>
    <span class="n">stacks</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
    <span class="n">moves</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()</span>

        <span class="c1"># Read stacks
</span>        <span class="k">for</span> <span class="n">j</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">lines</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">//</span> <span class="mi">4</span><span class="p">):</span>
                <span class="n">stacks</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="s">"[^A-Za-z]+"</span><span class="p">,</span> <span class="s">""</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">4</span> <span class="p">:</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">4</span> <span class="o">+</span> <span class="mi">4</span><span class="p">]))</span>

        <span class="c1"># Read moves
</span>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:]:</span>
            <span class="n">moves</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="p">.</span><span class="n">sub</span><span class="p">(</span><span class="s">"[^0-9]+"</span><span class="p">,</span> <span class="s">" "</span><span class="p">,</span> <span class="n">line</span><span class="p">).</span><span class="n">split</span><span class="p">()])</span>

    <span class="k">return</span> <span class="p">{</span><span class="n">k</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">v</span> <span class="k">if</span> <span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">stacks</span><span class="p">.</span><span class="n">items</span><span class="p">()},</span> <span class="n">moves</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Task: apply the moves and list the top item in the stack</p>
 <p>The moves are applied in sequence using <code class="highlighter-rouge">apply_moves</code>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">apply_moves</span><span class="p">(</span>
    <span class="n">stacks</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">chr</span><span class="p">]],</span> <span class="n">moves</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="n">reverse</span><span class="p">:</span> <span class="nb">bool</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">n</span><span class="p">,</span> <span class="n">s</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">moves</span><span class="p">:</span>
        <span class="n">sub</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">[</span><span class="n">s</span><span class="p">][:</span><span class="n">n</span><span class="p">]</span>
        <span class="n">stacks</span><span class="p">[</span><span class="n">d</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">sub</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">reverse</span> <span class="k">else</span> <span class="n">sub</span><span class="p">)</span> <span class="o">+</span> <span class="n">stacks</span><span class="p">[</span><span class="n">d</span><span class="p">]</span>
        <span class="n">stacks</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">stacks</span><span class="p">[</span><span class="n">s</span><span class="p">][</span><span class="n">n</span><span class="p">:]</span>
    <span class="k">return</span> <span class="s">""</span><span class="p">.</span><span class="n">join</span><span class="p">([</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">stacks</span><span class="p">.</span><span class="n">items</span><span class="p">()])</span>
</code></pre></div></div>
 <p>The reverse option is used to reorder the stack to work with the specification. For this task <code class="highlighter-rouge">reverse=True</code>.</p>
 <p><strong>Part 2</strong></p>
 <p>Task: same but with different ordering of added items.</p>
 <p>This is solved with the same <code class="highlighter-rouge">apply_moves</code> function with <code class="highlighter-rouge">reverse=False</code>.</p>
</details>
<h2 id="day-06---tuning-trouble">Day 06 - Tuning Trouble</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/6">AOC Day 06 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day06.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day06 solution</i><br />&nbsp;<br /></summary>
 <p>5 examples are given:</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>7 mjqjpqmgbljsphdztnvjfqwrcgsmlb
5 bvwbjplbgvbhsrlpgdmjqwftvncz
6 nppdvjthqldpwncqszvftbrmjlhg
10 nznrnfrfntjfmvfwmzdfjlvtqnbhcprsg
11 zcfzfwzzqfrljwzlrfnpqdbhtmscgvjw
</code></pre></div></div>
 <p>Task: find message start - the first instance of four different consecutive characters.</p>
 <p>Solution: generate the length of the <code class="highlighter-rouge">set</code> of n character spans until it equals n. For
this <a href="https://docs.python.org/3.8/library/itertools.html#itertools.takewhile"><code class="highlighter-rouge">itertools.takewhile</code></a>
is very useful.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">takewhile</span>
<span class="k">def</span> <span class="nf">find_start</span><span class="p">(</span><span class="n">message</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="nb">sum</span><span class="p">(</span>
        <span class="mi">1</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">takewhile</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">!=</span> <span class="n">n</span><span class="p">,</span>
            <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="n">x</span> <span class="o">-</span> <span class="n">n</span> <span class="p">:</span> <span class="n">x</span><span class="p">])),</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">))),</span>
        <span class="p">)</span>
    <span class="p">)</span>
</code></pre></div></div>
 <p>Plugging in <code class="highlighter-rouge">n=4</code> into this gives the correct solution for part 1, and part 2 likewise 
with <code class="highlighter-rouge">n=14</code>.</p>
</details>
<h2 id="day-07---no-space-left-on-device">Day 07 - No Space Left On Device</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/7">AOC Day 07 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day07.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day07 solution</i><br />&nbsp;<br /></summary>
 <p>A file system is explored using <code class="highlighter-rouge">cd</code> and <code class="highlighter-rouge">ls</code>. The first <code class="highlighter-rouge">cd</code> is always to <code class="highlighter-rouge">/</code> and <code class="highlighter-rouge">ls</code>
are always in current directory. Lines with commands starts with <code class="highlighter-rouge">$</code>. Listings of
directories start with <code class="highlighter-rouge">dir</code>, and listings of file starts with file size.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cd /
$ ls
dir a
14848514 b.txt
8504156 c.dat
dir d
$ cd a
$ ls
dir e
29116 f
2557 g
62596 h.lst
$ cd e
$ ls
584 i
$ cd ..
$ cd ..
$ cd d
$ ls
4060174 j
8033020 d.log
5626152 d.ext
7214296 k
</code></pre></div></div>
 <p>The code is read into a tree strucutre of nested dictionaries using <code class="highlighter-rouge">read_tree</code>. For
files the value is the filesize int instead of a dictionary. I based the thinking here
on my <a href="https://thomasburgess.github.io/blog/2021/07/18/tree_hack.html">Tree Hack blog post</a>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_tree</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">cwd</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">tree</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]:</span>
            <span class="n">split</span> <span class="o">=</span> <span class="n">line</span><span class="p">.</span><span class="n">split</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="s">"$"</span><span class="p">:</span>
                <span class="c1"># Add file or directory
</span>                <span class="n">t</span><span class="p">[</span><span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">"dir"</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">split</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">split</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">"cd"</span><span class="p">:</span>
                <span class="n">dest</span> <span class="o">=</span> <span class="n">line</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="c1"># Update current working directory
</span>                <span class="n">cwd</span> <span class="o">=</span> <span class="n">cwd</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">dest</span> <span class="o">==</span> <span class="s">".."</span> <span class="k">else</span> <span class="p">(</span><span class="n">cwd</span> <span class="o">+</span> <span class="p">[</span><span class="n">dest</span><span class="p">])</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">tree</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cwd</span><span class="p">:</span>  <span class="c1"># Jump to the right directory in the tree
</span>                    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="p">[</span><span class="n">c</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">tree</span>
</code></pre></div></div>
 <p>with the tree structure in place, one can traverse the tree and collect the total size of each directory.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">dir_size</span><span class="p">(</span><span class="n">tree</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">base</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">"/"</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span><span class="n">base</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tree</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">result</span><span class="p">[</span><span class="n">base</span><span class="p">]</span> <span class="o">+=</span> <span class="n">v</span>
            <span class="k">continue</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">base</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="n">k</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">dir_size</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">base</span><span class="o">=</span><span class="n">key</span><span class="p">)</span>
        <span class="n">result</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
        <span class="n">result</span><span class="p">[</span><span class="n">base</span><span class="p">]</span> <span class="o">+=</span> <span class="n">t</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>
 <p>The data input for the problems is the output of <code class="highlighter-rouge">dir_size(read_data("input.txt"))</code>.</p>
 <p><strong>Part 1</strong></p>
 <p>Task 1: Find sum of directory sizes less than 100000</p>
 <p>Solution: sum sizes ignoring anything smaller than the threshold:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">thresh</span><span class="o">=</span><span class="mi">100000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="p">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">v</span> <span class="o">&lt;</span> <span class="mi">100000</span><span class="p">)</span>
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>Task 2: Find smallest directory that when removed leaves 30000000 free storage of a 
total of 70000000.</p>
 <p>Solution: Take smallest element of items where <code class="highlighter-rouge">70000000-used+size&gt;30000000</code></p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> <span class="n">total</span><span class="o">=</span><span class="mi">70000000</span><span class="p">,</span> <span class="n">req</span><span class="o">=</span><span class="mi">30000000</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="nb">min</span><span class="p">(</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">data</span><span class="p">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">total</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="s">"/"</span><span class="p">]</span> <span class="o">+</span> <span class="n">v</span> <span class="o">&gt;</span> <span class="n">req</span><span class="p">)</span>
</code></pre></div></div>
</details>
<h2 id="day-08---treetop-tree-house">Day 08 - Treetop Tree House</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/8">AOC Day 08 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day08.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day08 solution</i><br />&nbsp;<br /></summary>
 <p>Data are heights of trees on a square grid.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>30373
25512
65332
33549
35390
</code></pre></div></div>
 <p>The maps are read into a list of list of ints.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_map</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
    <span class="s">"""Read in data into 2D int array"""</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">i</span><span class="p">.</span><span class="n">strip</span><span class="p">()))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">())</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Task: Count number of visible trees from the edge.</p>
 <p>Trees are not visible if behind trees of same or lower height.
The count is found as the sum of True values in a visibility matrix 
made by OR-ing together partial visibility matrices for each direction.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">T</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]]:</span>
    <span class="s">"""Transpose list of lists"""</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">data</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">vor</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bool</span><span class="p">],</span> <span class="n">y</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bool</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
    <span class="s">"""Elementwise or of lists x and y"""</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">i</span> <span class="ow">or</span> <span class="n">j</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">vx</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">]:</span>
    <span class="s">"""Visibility for each element in row x"""</span>
    <span class="k">return</span> <span class="p">[</span><span class="bp">True</span><span class="p">]</span> <span class="o">+</span> <span class="p">[</span><span class="nb">all</span><span class="p">(</span><span class="n">j</span> <span class="o">&lt;</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">x</span><span class="p">[:</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))]</span>


<span class="k">def</span> <span class="nf">vis</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">]]:</span>
    <span class="s">"""Visibilities for both directions in each row in data"""</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">vor</span><span class="p">(</span><span class="n">vx</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">vx</span><span class="p">(</span><span class="n">x</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">visibility</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">]]:</span>
    <span class="s">"""Visibility ORed for rows and columns in data"""</span>
    <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">vor</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">vis</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">T</span><span class="p">(</span><span class="n">vis</span><span class="p">(</span><span class="n">T</span><span class="p">(</span><span class="n">data</span><span class="p">)))))</span>


<span class="k">def</span> <span class="nf">sum_visibility</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="s">"""Sum visibilities"""</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">visibility</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>Task: find maximum scenic score (product number of tree visible in each direction)</p>
 <p>Here, for each tree the number of consecutive shorter trees is counted and multiplied 
together for each direction.</p>
 <p>This task took quite some time to debug, I think I didnâ€™t parse the instructions
correctlyâ€¦</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">count</span><span class="p">(</span><span class="n">v0</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">v</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="s">"""Count trees"""</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">v0</span> <span class="o">&lt;=</span> <span class="n">x</span><span class="p">:</span>
            <span class="k">break</span>
    <span class="k">return</span> <span class="n">n</span>


<span class="k">def</span> <span class="nf">scenic</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="s">"""Compute scenic score for each tree"""</span>
    <span class="n">scenic_scores</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">data_t</span> <span class="o">=</span> <span class="n">T</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">r</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">c</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="n">maxx</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">c</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
            <span class="n">maxx</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span>
                <span class="n">maxx</span><span class="p">,</span>
                <span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][:</span><span class="n">j</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="o">*</span> <span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">c</span><span class="p">])</span>
                <span class="o">*</span> <span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">data_t</span><span class="p">[</span><span class="n">j</span><span class="p">][:</span><span class="n">i</span><span class="p">][::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="o">*</span> <span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">data_t</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">r</span><span class="p">]),</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">maxx</span>
</code></pre></div></div>
</details>
<h2 id="day-09---rope-bridge">Day 09 - Rope Bridge</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/9">AOC Day 09 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day09.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day09 solution</i><br />&nbsp;<br /></summary>
 <p>Input data consists of moves with a direction (U,D,R,L) and a number of steps</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>R 4
U 4
L 3
D 1
R 4
D 1
L 5
R 2
</code></pre></div></div>
 <p>The task is to move the head of a rope according to the moves, and track how the tail
trails.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_moves</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span> <span class="p">(</span><span class="n">line</span><span class="p">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()))</span>
        <span class="p">)</span>
</code></pre></div></div>
 <p>The solution for part2 also solves part1 so I refactored simualte accordingly. As I had
several bugs, I added a handy printer function to print the rope and locations visited
by the tile:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">printer</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]],</span> <span class="n">hashes</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="bp">False</span><span class="p">):</span>
    <span class="n">c</span> <span class="o">=</span> <span class="p">[</span><span class="s">"#"</span> <span class="k">if</span> <span class="n">hashes</span> <span class="k">else</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">))]</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">hashes</span><span class="p">:</span>
        <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s">"H"</span>
    <span class="n">sx</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
    <span class="n">minx</span><span class="p">,</span> <span class="n">maxx</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">sx</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">sx</span><span class="p">)</span>
    <span class="n">sy</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">x</span><span class="p">]</span>
    <span class="n">miny</span><span class="p">,</span> <span class="n">maxy</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">sy</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">sy</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">miny</span><span class="p">,</span> <span class="n">maxy</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
        <span class="k">print</span><span class="p">(</span>
            <span class="s">""</span><span class="p">.</span><span class="n">join</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">c</span><span class="p">[</span><span class="n">x</span><span class="p">.</span><span class="n">index</span><span class="p">([</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">])]</span> <span class="k">if</span> <span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">else</span> <span class="s">"."</span>
                    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">minx</span><span class="p">,</span> <span class="n">maxx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="p">]</span>
            <span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></div>
 <p>The simulation is fairly straight forward, once you decode the instructionsâ€¦</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">sign</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">simulate</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="n">x</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
    <span class="n">DELTA</span> <span class="o">=</span> <span class="p">{</span><span class="s">"U"</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s">"D"</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="s">"R"</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s">"L"</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}</span>
    <span class="n">visited</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}</span>
    <span class="k">for</span> <span class="n">direction</span><span class="p">,</span> <span class="n">steps</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"=== </span><span class="si">{</span><span class="n">direction</span><span class="si">}</span><span class="s"> </span><span class="si">{</span><span class="n">steps</span><span class="si">}</span><span class="s"> ==="</span><span class="p">)</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">DELTA</span><span class="p">[</span><span class="n">direction</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">steps</span><span class="p">):</span>
            <span class="c1"># Update head
</span>            <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
            <span class="c1"># Update tail
</span>            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)):</span>
                <span class="n">dt</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="ow">or</span> <span class="nb">abs</span><span class="p">(</span><span class="n">dt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sign</span><span class="p">(</span><span class="n">dt</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                    <span class="n">x</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sign</span><span class="p">(</span><span class="n">dt</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">visited</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
            <span class="n">printer</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"VISITED"</span><span class="p">)</span>
        <span class="n">printer</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">visited</span><span class="p">),</span> <span class="n">hashes</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">visited</span><span class="p">)</span>
</code></pre></div></div>
 <p>With this code the solutions are comptuted by running:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">print</span><span class="p">(</span><span class="s">"part 1:"</span><span class="p">,</span> <span class="n">read_moves</span><span class="p">(</span><span class="s">"input.txt"</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"part 2:"</span><span class="p">,</span><span class="n">read_moves</span><span class="p">(</span><span class="s">"input.txt"</span><span class="p">),</span> <span class="mi">9</span><span class="p">)</span>
</code></pre></div></div>
</details>
<p>The printer gives this expected output for the tail visits for the longer example in 
part 2.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#.....................
#.............###.....
#............#...#....
.#..........#.....#...
..#..........#.....#..
...#........#.......#.
....#......#.........#
.....#..............#.
......#............#..
.......#..........#...
........#........#....
.........########.....
</code></pre></div></div>
<h2 id="day-10---cathode-ray-tube">Day 10 - Cathode-Ray Tube</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/10">AOC Day 10 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day10.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day10 solution</i><br />&nbsp;<br /></summary>
 <p>Data is instruction lists with <code class="highlighter-rouge">noop</code> (takes 1 cycle) and <code class="highlighter-rouge">addx</code> (takes 2 cycles). <code class="highlighter-rouge">addx dx</code> adds <code class="highlighter-rouge">dx</code> to the register x.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>noop
addx 3
addx -5
</code></pre></div></div>
 <p>The data is parsed to <code class="highlighter-rouge">cycle</code> count and <code class="highlighter-rouge">dx</code> for each instruction in <code class="highlighter-rouge">read_program</code>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_program</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">(</span><span class="mi">1</span> <span class="k">if</span> <span class="s">"noop"</span> <span class="ow">in</span> <span class="n">l</span> <span class="k">else</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span> <span class="k">if</span> <span class="s">"noop"</span> <span class="ow">in</span> <span class="n">l</span> <span class="k">else</span> <span class="nb">int</span><span class="p">(</span><span class="n">l</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="p">]</span>
</code></pre></div></div>
 <p>Next, the program is executed using <code class="highlighter-rouge">run_program</code>to track <code class="highlighter-rouge">cycle</code> count and <code class="highlighter-rouge">x</code> after
each instructions. <code class="highlighter-rouge">x</code> starts at 1.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">run_program</span><span class="p">(</span><span class="n">prog</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]],</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]:</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="n">x</span><span class="p">]]</span>
    <span class="k">for</span> <span class="n">dt</span><span class="p">,</span> <span class="n">dx</span> <span class="ow">in</span> <span class="n">prog</span><span class="p">:</span>
        <span class="n">y</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dt</span><span class="p">,</span> <span class="n">y</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">dx</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">y</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Task: Get cycle count * x for every 40th cycle starting at 20</p>
 <p>The result is obtained by applying <code class="highlighter-rouge">part1</code> to the output of <code class="highlighter-rouge">run_program</code>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="n">out</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">q</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">out</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="mi">40</span><span class="p">):</span>
        <span class="o">*</span><span class="n">_</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">q</span> <span class="o">*</span> <span class="n">v</span> <span class="k">for</span> <span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">v</span><span class="p">)</span> <span class="ow">in</span> <span class="n">out</span> <span class="k">if</span> <span class="n">t</span> <span class="o">&lt;</span> <span class="n">q</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">x</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>Task: Draw pixels when x is within +-1 of cycle MOD 40.</p>
 <p>The result is obtained by applying <code class="highlighter-rouge">part2</code> to the output of <code class="highlighter-rouge">run_program</code>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="n">prog</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
    <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="s">" "</span><span class="p">]</span> <span class="o">*</span> <span class="mi">240</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">240</span><span class="p">):</span>
        <span class="n">r</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="nb">divmod</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prog</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">c</span> <span class="o">&lt;=</span> <span class="n">prog</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="s">"â–ˆ"</span>
        <span class="k">if</span> <span class="n">s</span> <span class="o">&gt;</span> <span class="n">prog</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]:</span>
            <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="s">""</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="n">i</span> <span class="o">*</span> <span class="mi">40</span> <span class="p">:</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">40</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
</code></pre></div></div>
</details>
<p>This part is very satisfying as you get nice output! For the example:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ
â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ
</code></pre></div></div>
<p>and for my input:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆ
â–ˆ  â–ˆ    â–ˆ â–ˆ  â–ˆ â–ˆ  â–ˆ    â–ˆ â–ˆ       â–ˆ â–ˆ  â–ˆ
â–ˆ  â–ˆ   â–ˆ  â–ˆâ–ˆâ–ˆ  â–ˆ      â–ˆ  â–ˆâ–ˆâ–ˆ     â–ˆ â–ˆâ–ˆâ–ˆ
â–ˆâ–ˆâ–ˆ   â–ˆ   â–ˆ  â–ˆ â–ˆ â–ˆâ–ˆ  â–ˆ   â–ˆ       â–ˆ â–ˆ  â–ˆ
â–ˆ    â–ˆ    â–ˆ  â–ˆ â–ˆ  â–ˆ â–ˆ    â–ˆ    â–ˆ  â–ˆ â–ˆ  â–ˆ
â–ˆ    â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ
</code></pre></div></div>
<h2 id="day-11---monkey-in-the-middle">Day 11 - Monkey in the Middle</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/11">AOC Day 11 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day11.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day11 solution</i><br />&nbsp;<br /></summary>
 <p>Monkeys process their stack of worries and perform an operation on them, divides the results, and passes it on to another monkey depending on divisibility.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Monkey 0:
  Starting items: 79, 98
  Operation: new = old * 19
  Test: divisible by 23
    If true: throw to monkey 2
    If false: throw to monkey 3

Monkey 1:
  Starting items: 54, 65, 75, 74
  Operation: new = old + 6
  Test: divisible by 19
    If true: throw to monkey 2
    If false: throw to monkey 0

...
</code></pre></div></div>
 <p>I read the data with the <code class="highlighter-rouge">read_monkey</code>. This function defines the operation and test as lambdas to be applied later. If <code class="highlighter-rouge">divby</code> is 1 the <code class="highlighter-rouge">//</code> at the end of the operation is avoided altogether (useful in part 2). Inspected is a counter that should be incremented for every action the monkey takes.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_monkeys</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">divby</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">monkey</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">read</span><span class="p">().</span><span class="n">split</span><span class="p">(</span><span class="s">"</span><span class="se">\n\n</span><span class="s">"</span><span class="p">):</span>
            <span class="n">monkey_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">m</span><span class="p">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">monkey</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">"</span><span class="p">)</span> <span class="k">if</span> <span class="n">m</span><span class="p">.</span><span class="n">strip</span><span class="p">()]</span>

            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s">"monkey"</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">monkey_data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">replace</span><span class="p">(</span><span class="s">":"</span><span class="p">,</span> <span class="s">""</span><span class="p">).</span><span class="n">split</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span>
                    <span class="s">"stack"</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span>
                        <span class="nb">map</span><span class="p">(</span>
                            <span class="nb">int</span><span class="p">,</span>
                            <span class="n">monkey_data</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">replace</span><span class="p">(</span><span class="s">"Starting items: "</span><span class="p">,</span> <span class="s">""</span><span class="p">).</span><span class="n">split</span><span class="p">(</span><span class="s">","</span><span class="p">),</span>
                        <span class="p">)</span>
                    <span class="p">),</span>
                    <span class="s">"inspected"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                    <span class="s">"mod"</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">monkey_data</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">replace</span><span class="p">(</span><span class="s">"Test: divisible by "</span><span class="p">,</span> <span class="s">""</span><span class="p">)),</span>
                    <span class="s">"operation"</span><span class="p">:</span> <span class="nb">eval</span><span class="p">(</span>
                        <span class="s">"lambda x: ("</span>
                        <span class="o">+</span> <span class="n">monkey_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
                        <span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"Operation: new = "</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
                        <span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"old"</span><span class="p">,</span> <span class="s">"x"</span><span class="p">)</span>
                        <span class="o">+</span> <span class="s">")"</span>
                        <span class="o">+</span> <span class="p">(</span><span class="s">""</span> <span class="k">if</span> <span class="n">divby</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="sa">f</span><span class="s">"//</span><span class="si">{</span><span class="n">divby</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
                    <span class="p">),</span>
                    <span class="s">"test"</span><span class="p">:</span> <span class="nb">eval</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s">"lambda x: (</span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">monkey_data</span><span class="p">[</span><span class="mi">4</span><span class="p">].</span><span class="n">split</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">int</span><span class="p">(</span><span class="n">monkey_data</span><span class="p">[</span><span class="mi">5</span><span class="p">].</span><span class="n">split</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="si">}</span><span class="s">)"</span>
                        <span class="sa">f</span><span class="s">"[x % </span><span class="si">{</span><span class="nb">int</span><span class="p">(</span><span class="n">monkey_data</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="n">replace</span><span class="p">(</span><span class="s">'Test</span><span class="si">:</span> <span class="n">divisible</span> <span class="n">by</span> <span class="s">', ''))</span><span class="si">}</span><span class="s"> != 0]"</span>
                    <span class="p">),</span>
                <span class="p">}</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>
</code></pre></div></div>
 <p>In <code class="highlighter-rouge">run_monkeys</code> each monkey is evaulated in several rounds. The <code class="highlighter-rouge">mod</code> argument keeps worry from going too large in part2.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">run_monkeys</span><span class="p">(</span><span class="n">monkeys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">],</span> <span class="n">rounds</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">mod</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rounds</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">monkeys</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">m</span><span class="p">[</span><span class="s">"stack"</span><span class="p">]:</span>
                <span class="n">m</span><span class="p">[</span><span class="s">"inspected"</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">i</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="s">"stack"</span><span class="p">].</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">x</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="s">"operation"</span><span class="p">](</span><span class="n">i</span><span class="p">)</span>
                <span class="n">monkeys</span><span class="p">[</span><span class="n">m</span><span class="p">[</span><span class="s">"test"</span><span class="p">](</span><span class="n">x</span><span class="p">)][</span><span class="s">"stack"</span><span class="p">].</span><span class="n">append</span><span class="p">(</span><span class="n">x</span> <span class="o">%</span> <span class="n">mod</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">monkeys</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Find the product of the inspection count of the two busiest monkeys after 20 rounds, using <code class="highlighter-rouge">divby=3</code>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">prod</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">reduce</span><span class="p">(</span><span class="n">operator</span><span class="p">.</span><span class="n">mul</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">monkey_biz</span><span class="p">(</span><span class="n">monkeys</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">dict</span><span class="p">]):</span>
    <span class="k">return</span> <span class="n">prod</span><span class="p">(</span><span class="nb">sorted</span><span class="p">([</span><span class="n">m</span><span class="p">[</span><span class="s">"inspected"</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">monkeys</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)[:</span><span class="mi">2</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="s">"Part 1: "</span><span class="p">,</span> <span class="n">monkey_biz</span><span class="p">(</span><span class="n">run_monkeys</span><span class="p">(</span><span class="n">read_monkeys</span><span class="p">(</span><span class="s">"input.txt"</span><span class="p">,</span> <span class="n">divby</span><span class="o">=</span><span class="mi">3</span><span class="p">),</span> <span class="n">rounds</span><span class="o">=</span><span class="mi">20</span><span class="p">)))</span>
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>The initial version of part1 was very very slow, I never bothered running it for more than 800 rounds. This is because the worries becomes huge. The solution is to apply the modulus product over all monkeys, using the <code class="highlighter-rouge">mod</code> setting in <code class="highlighter-rouge">run_monkeys</code> (I had to consult some forums to get that right).</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">mod</span> <span class="o">=</span> <span class="n">prod</span><span class="p">([</span><span class="n">m</span><span class="p">[</span><span class="s">"mod"</span><span class="p">]</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">monkeys</span><span class="p">])</span>
<span class="n">monkeys</span> <span class="o">=</span> <span class="n">run_monkeys</span><span class="p">(</span><span class="n">monkeys</span><span class="o">=</span><span class="n">monkeys</span><span class="p">,</span> <span class="n">rounds</span><span class="o">=</span><span class="n">rounds</span><span class="p">,</span> <span class="n">mod</span><span class="o">=</span><span class="n">mod</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">"Part 2:"</span><span class="p">,</span> <span class="n">monkey_biz</span><span class="p">(</span><span class="n">monkeys</span><span class="p">))</span>
</code></pre></div></div>
</details>
<h2 id="day-12---hill-climbing-algorithm">Day 12 - Hill Climbing Algorithm</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/12">AOC Day 12 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day12.py">code link</a></li>
</ul>
<p>This was easily my favourite entry so far!</p>
<details>
  <summary><i>Click to expand Day12 solution</i><br />&nbsp;<br /></summary>
 <p>The data is a heightfield, with height as char: a(lowest) to z(highest). The path starts at S (height=a), and ends at E (height=z).</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Sabqponm
abcryxxl
accszExk
acctuvwj
abdefghi
</code></pre></div></div>
 <p>The function <code class="highlighter-rouge">read_map</code> parses the input integer heights (with a=0), extracts the start and end point, and gets the map size m x n. With <code class="highlighter-rouge">make_graph</code> the map is turned into an adjeceny graph, ensuring map bounds are kept and no steps are taken up more than 1 height unit. With this, <code class="highlighter-rouge">bfs</code> is implemented - a vanilla 
<a href="https://en.wikipedia.org/wiki/Breadth-first_search">Breadth First Search</a> to find the shortest path from S to E. I found the <a href="https://docs.python.org/3/library/collections.html#collections.deque">deque</a> being sufficiently fast for both parts.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">collections</span>

<span class="k">def</span> <span class="nf">read_map</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[[</span><span class="nb">ord</span><span class="p">(</span><span class="n">j</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">i</span><span class="p">.</span><span class="n">strip</span><span class="p">()]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()]</span>
        <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">start</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
            <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">index</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">"S"</span><span class="p">)))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"S"</span><span class="p">)</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">end</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
            <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">index</span><span class="p">(</span><span class="nb">ord</span><span class="p">(</span><span class="s">"E"</span><span class="p">)))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="k">if</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"E"</span><span class="p">)</span> <span class="ow">in</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">start</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"a"</span><span class="p">)</span>
        <span class="n">data</span><span class="p">[</span><span class="n">end</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">end</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"z"</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">-</span> <span class="nb">ord</span><span class="p">(</span><span class="s">"a"</span><span class="p">)</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
        <span class="p">]</span>  <span class="c1"># subtract a
</span>    <span class="k">return</span> <span class="n">data</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span>

<span class="k">def</span> <span class="nf">make_graph</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">):</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
            <span class="n">graph</span><span class="p">[(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">)]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span>
                <span class="n">c</span>
                <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">),</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">j</span><span class="p">),</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
                <span class="k">if</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">n</span>
                <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">m</span>
                <span class="ow">and</span> <span class="n">data</span><span class="p">[</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">-</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span>
            <span class="p">)</span>
    <span class="k">return</span> <span class="n">graph</span>

<span class="k">def</span> <span class="nf">bfs</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">start</span> <span class="o">==</span> <span class="n">end</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">start</span><span class="p">]</span>
    <span class="n">done</span> <span class="o">=</span> <span class="p">{</span><span class="n">start</span><span class="p">}</span>
    <span class="n">queue</span> <span class="o">=</span> <span class="n">collections</span><span class="p">.</span><span class="n">deque</span><span class="p">([(</span><span class="n">start</span><span class="p">,</span> <span class="p">[])])</span>
    <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
        <span class="n">c</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">popleft</span><span class="p">()</span>
        <span class="n">done</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">graph</span><span class="p">[</span><span class="n">c</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="n">end</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">path</span> <span class="o">+</span> <span class="p">[</span><span class="n">c</span><span class="p">,</span> <span class="n">n</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">done</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">queue</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">path</span> <span class="o">+</span> <span class="p">[</span><span class="n">c</span><span class="p">]))</span>
            <span class="n">done</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">None</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Part one is solved by the following code:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">data</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">read_map</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="n">make_graph</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
    <span class="n">sol</span> <span class="o">=</span> <span class="n">bfs</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
</code></pre></div></div>
 <p>This is what the solution looks like:</p>
 <figure>
<p><img src="/assets/images/2022/12/01/day12_input_part1.png" alt="Solution ot part 1." id="figure-1" width="95%" /></p>
 <figcaption>Figure 1: Solution to part 1.</figcaption>
</figure>
 <p>The figure was made using matplotlib</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># data from read_map, sol from bfs
</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span><span class="p">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">([</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sol</span><span class="p">],</span> <span class="p">[</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sol</span><span class="p">],</span> <span class="s">"r-"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sol</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">sol</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s">"m*"</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">plot</span><span class="p">(</span><span class="n">sol</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">sol</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s">"b+"</span><span class="p">,</span> <span class="n">ms</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>  
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>In part 2, any point at height <code class="highlighter-rouge">a</code> is used as the starting point.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">data</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">read_map</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">graph</span> <span class="o">=</span> <span class="n">make_graph</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
    <span class="n">best</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">for</span> <span class="n">start</span> <span class="ow">in</span> <span class="p">[</span><span class="n">g</span> <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">graph</span> <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">g</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">g</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">]:</span>
        <span class="n">sol</span> <span class="o">=</span> <span class="n">bfs</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">sol</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">best</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">best</span><span class="p">:</span>
            <span class="n">best</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
    <span class="k">return</span> <span class="n">best</span> <span class="o">-</span> <span class="mi">1</span>
</code></pre></div></div>
</details>
<p>This is what the solution looks like:</p>
<figure>
<p><img src="/assets/images/2022-12-01/day12_input_part2.png" alt="Solution ot part 2." id="figure-2" width="95%" /></p>
 <figcaption>Figure 2: Part 2: The yellow path is the shortest path, the red are candidates.</figcaption>
</figure>
<h2 id="day-13---distress-signal">Day 13 - Distress Signal</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/13">AOC Day 13 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day13.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day13 solution</i><br />&nbsp;<br /></summary>
 <p>Data are pairs of nested lists separated by blanks</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1,1,3,1,1]
[1,1,5,1,1]

[[1],[2,3,4]]
[[1],4]
</code></pre></div></div>
 <p>This data is parsed to python lists in <code class="highlighter-rouge">read_pairs</code>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_pairs</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">eval</span><span class="p">,</span> <span class="p">(</span><span class="n">lines</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">lines</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])))</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">lines</span><span class="p">),</span> <span class="mi">3</span><span class="p">)</span>
        <span class="p">]</span>
</code></pre></div></div>
 <p><strong>Part 1</strong></p>
 <p>Task: compare pairs, and print the sum of indices of the pairs that are in order, as done in <code class="highlighter-rouge">part1</code>.</p>
 <p>The comparison is done in <code class="highlighter-rouge">compare</code>. If anything is found in or out of order the comparison stops and returns the results. Pairs of <code class="highlighter-rouge">int</code> are in order if <code class="highlighter-rouge">left &lt; right</code> and out of order <code class="highlighter-rouge">right &lt; left</code>. List pairs are iterated over sequentially, integer items are compared like above, and the procedure is recursed for list items. Mixed pairs are comnverted to list pairs. If the left list still has items remaining the pair is Ã¬n order, and if the right list still has items remaining it is out of order.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">compare</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">):</span>
        <span class="n">ints</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nb">int</span><span class="p">),</span> <span class="p">(</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">)))</span>
        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="n">ints</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="n">l</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">return</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">r</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">compare</span><span class="p">([</span><span class="n">l</span><span class="p">]</span> <span class="k">if</span> <span class="n">ints</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">else</span> <span class="n">l</span><span class="p">,</span> <span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="k">if</span> <span class="n">ints</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="n">r</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">result</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">right</span><span class="p">):</span>
        <span class="k">return</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">left</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">part1</span><span class="p">(</span><span class="n">pairs</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pair</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pairs</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">compare</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</code></pre></div></div>
 <p><strong>Part 2</strong></p>
 <p>Task: flatten pairs, add items <code class="highlighter-rouge">[[2]]</code> and <code class="highlighter-rouge">[[6]]</code>, sort according to <code class="highlighter-rouge">compare</code>, and find the product of indices of <code class="highlighter-rouge">[[2]]</code> and <code class="highlighter-rouge">[[6]]</code>.</p>
 <p>Here I use <a href="https://docs.python.org/3/library/functools.html#functools.cmp_to_key"><code class="highlighter-rouge">functools.cmp_to_key</code></a> to turn <code class="highlighter-rouge">compare</code> into a  <a href="https://docs.python.org/3/glossary.html#term-key-function">key function</a>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">functools</span>
<span class="kn">import</span> <span class="nn">operator</span>

<span class="k">def</span> <span class="nf">prod</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">functools</span><span class="p">.</span><span class="nb">reduce</span><span class="p">(</span><span class="n">operator</span><span class="p">.</span><span class="n">mul</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="n">pairs</span><span class="p">):</span>
    <span class="n">q</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
        <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pairs</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">]</span> <span class="o">+</span> <span class="p">[[[</span><span class="mi">2</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">6</span><span class="p">]]],</span>
        <span class="n">key</span><span class="o">=</span><span class="n">functools</span><span class="p">.</span><span class="n">cmp_to_key</span><span class="p">(</span><span class="k">lambda</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">:</span> <span class="o">-</span><span class="n">compare</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)),</span>
    <span class="p">)</span>
    <span class="k">return</span> <span class="n">prod</span><span class="p">([</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">q</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">([[</span><span class="mi">2</span><span class="p">]],</span> <span class="p">[[</span><span class="mi">6</span><span class="p">]])])</span>
</code></pre></div></div>
 <p>Somehow my comparator only works in negative, but it does work :)</p>
</details>
<h2 id="day-14---regolith-reservoir">Day 14 - Regolith Reservoir</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/14">AOC Day 14 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day14.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day14 solution</i><br />&nbsp;<br /></summary>
 <p>Data represents a map with obstacles givens as vertical or horizontal line segments:</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>498,4 -&gt; 498,6 -&gt; 496,6
503,4 -&gt; 502,4 -&gt; 502,9 -&gt; 494,9
</code></pre></div></div>
 <p>In <code class="highlighter-rouge">read_map</code> this data is read in and transformed into a list of lines, each consisting of list of segments.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">read_map</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span>
            <span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">","</span><span class="p">)))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">line</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">"-&gt;"</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="p">]</span>
</code></pre></div></div>
 <p>This can easily by plotted with matplotlib as a <a href="https://matplotlib.org/stable/api/collections_api.html#matplotlib.collections.LineCollection">LineCollection</a></p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">plot_map</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">add_collection</span><span class="p">(</span><span class="n">LineCollection</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">autoscale_view</span><span class="p">()</span>  <span class="c1"># See comment above, after ax1.add_collection.
</span>    <span class="n">ax</span><span class="p">.</span><span class="nb">set</span><span class="p">(</span><span class="n">ylim</span><span class="o">=</span><span class="n">ax</span><span class="p">.</span><span class="n">get_ylim</span><span class="p">()[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="p">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s">'equal'</span><span class="p">,</span> <span class="s">'box'</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">plot_map</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">indata</span><span class="p">)</span>
<span class="n">fig</span><span class="p">.</span><span class="n">tight_layout</span><span class="p">()</span>
</code></pre></div></div>
 <figure>
<p><img src="/assets/images/2022/12/01/day14_map.png" alt="Map from input data." id="figure-1" width="241px" /></p>
 <figcaption>Figure 1: Map from input data.</figcaption>
</figure>
 <p>For the sand simulation it will be more convenient knowing which positions (pixels) are occupied.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">sign</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">make_pixles</span><span class="p">(</span><span class="n">data</span><span class="p">):</span>
    <span class="n">pxl</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">segs</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">segs</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">segs</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mi">0</span> <span class="k">else</span> <span class="mi">0</span>
            <span class="n">si</span> <span class="o">=</span> <span class="n">sign</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="n">pxl</span><span class="p">.</span><span class="n">update</span><span class="p">({((</span><span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="k">else</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])):</span> <span class="bp">True</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span>  <span class="nb">range</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="n">si</span><span class="p">,</span> <span class="n">si</span><span class="p">)})</span>
    <span class="k">return</span> <span class="n">pxl</span>

<span class="k">def</span> <span class="nf">limits</span><span class="p">(</span><span class="n">pixels</span><span class="p">):</span>
    <span class="p">(</span><span class="n">min0</span><span class="p">,</span> <span class="n">max0</span><span class="p">),(</span><span class="n">min1</span><span class="p">,</span> <span class="n">max1</span><span class="p">)</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">pxl</span><span class="p">))</span>    
    <span class="k">return</span> <span class="n">min0</span><span class="p">,</span> <span class="n">max0</span><span class="p">,</span> <span class="n">min1</span><span class="p">,</span> <span class="n">max1</span>

</code></pre></div></div>
 <p>At (500,0) sand grains are produced and fall one at a time until they come to rest. Grains try to fall down, if down is blocked they go down-left, if that also is blocked down-right, and if everything is blocked it stops.</p>
 <p><strong>Tasks</strong></p>
 <p>Part1: How many sand grains come to rest before sand starts flowing into the abyss below?</p>
 <p>Part2: How many sand grains come to rest before sand hole gets filled, assuming an infinite floor at max(mapy)+2</p>
 <p>As sand propgagation is the same, really the only thing tat is different between the parts is the bounds checking. I solve that by adding missing floor pixels for part2.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">add_sand</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">min0</span><span class="p">,</span> <span class="n">max0</span><span class="p">,</span> <span class="n">min1</span><span class="p">,</span> <span class="n">max1</span><span class="p">,</span> <span class="n">part1</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pixels</span><span class="p">:</span>
        <span class="n">t</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="n">a</span>
                <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="p">((</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">a</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pixels</span>
            <span class="p">),</span>
            <span class="bp">None</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">t</span><span class="p">:</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">t</span>
            <span class="k">if</span> <span class="n">part1</span> <span class="ow">and</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max1</span> <span class="ow">or</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">min0</span> <span class="ow">or</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">max0</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">part1</span> <span class="ow">and</span> <span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">max1</span><span class="o">+</span><span class="mi">2</span><span class="p">):</span>
                <span class="n">pixels</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="k">return</span> <span class="bp">True</span>                
            <span class="k">continue</span>
        <span class="n">pixels</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">return</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">fill</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">part1</span><span class="p">):</span>
    <span class="n">pixels</span> <span class="o">=</span> <span class="n">make_pixles</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">min0</span><span class="p">,</span> <span class="n">max0</span><span class="p">,</span> <span class="n">min1</span><span class="p">,</span> <span class="n">max1</span> <span class="o">=</span> <span class="n">limits</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">add_sand</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">min0</span><span class="p">,</span> <span class="n">max0</span><span class="p">,</span> <span class="n">min1</span><span class="p">,</span> <span class="n">max1</span><span class="p">,</span> <span class="n">part1</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">p</span><span class="o">==</span><span class="mi">2</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">pixels</span><span class="p">.</span><span class="n">values</span><span class="p">())</span>

</code></pre></div></div>
 <p>To pretty print the map I added</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">print_pixels</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="s">"."</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="s">"#"</span><span class="p">,</span> <span class="n">sand</span><span class="o">=</span><span class="s">"o"</span><span class="p">):</span>
    <span class="n">min0</span><span class="p">,</span> <span class="n">max0</span><span class="p">,</span> <span class="n">min1</span><span class="p">,</span> <span class="n">max1</span> <span class="o">=</span> <span class="n">limits</span><span class="p">(</span><span class="n">pixels</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">min1</span><span class="p">,</span> <span class="n">max1</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">""</span><span class="p">.</span><span class="n">join</span><span class="p">((</span><span class="n">blank</span><span class="p">,</span> <span class="n">full</span><span class="p">,</span> <span class="n">sand</span><span class="p">)[</span><span class="n">pixels</span><span class="p">.</span><span class="n">get</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="bp">False</span><span class="p">)]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">min0</span><span class="p">,</span> <span class="n">max0</span><span class="o">+</span><span class="mi">1</span><span class="p">)))</span>

<span class="n">print_pixels</span><span class="p">(</span><span class="n">pixels</span><span class="p">,</span> <span class="n">blank</span><span class="o">=</span><span class="s">"â¬œ"</span><span class="p">,</span> <span class="n">full</span><span class="o">=</span><span class="s">"ðŸŸ«"</span><span class="p">,</span> <span class="n">sand</span><span class="o">=</span><span class="s">"ðŸŸ¨"</span><span class="p">)</span>
</code></pre></div></div>
 <p>which gives this output for part 2 (using fancy box characters):</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œðŸŸ¨â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œ
â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œ
â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œ
â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œ
â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ«ðŸŸ¨â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œ
â¬œâ¬œâ¬œâ¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œâ¬œâ¬œâ¬œâ¬œ
â¬œâ¬œâ¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œâ¬œâ¬œâ¬œ
â¬œâ¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œâ¬œâ¬œ
â¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œâ¬œ
â¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œ
â¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œâ¬œâ¬œâ¬œâ¬œâ¬œâ¬œðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨ðŸŸ¨â¬œ
ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«â¬œâ¬œâ¬œâ¬œâ¬œðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«ðŸŸ«
</code></pre></div></div>
</details>
<h2 id="day-15---beacon-exclusion-zone">Day 15 - Beacon Exclusion Zone</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/15">AOC Day 15 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day15.py">code link</a></li>
</ul>
<details>
  <summary><i>Click to expand Day15 solution</i><br />&nbsp;<br /></summary>
 <p>Data is on this form:</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Sensor at x=2, y=18: closest beacon is at x=-2, y=15
Sensor at x=9, y=16: closest beacon is at x=10, y=16
...
</code></pre></div></div>
 <p>For the solution I need the manhattan distance between sensor and closest beacon. So I read in the data, parse as ints and compute the distance:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">distance</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">read_beacons</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">int</span><span class="p">],</span> <span class="nb">int</span><span class="p">]:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span>
            <span class="nb">map</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">],</span> <span class="n">distance</span><span class="p">(</span><span class="n">x</span><span class="p">)),</span>
                <span class="p">(</span>
                    <span class="nb">tuple</span><span class="p">(</span>
                        <span class="nb">int</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
                        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">"; |, |=|:"</span><span class="p">,</span> <span class="n">line</span><span class="p">.</span><span class="n">strip</span><span class="p">())</span>
                        <span class="k">if</span> <span class="n">i</span><span class="p">.</span><span class="n">replace</span><span class="p">(</span><span class="s">"-"</span><span class="p">,</span> <span class="s">""</span><span class="p">).</span><span class="n">isdigit</span><span class="p">()</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="p">),</span>
            <span class="p">)</span>
        <span class="p">)</span>
</code></pre></div></div>
 <p><strong>Part 1</strong>:</p>
 <p>Task: Count positions that are covered between the beacons and sensors for row 2000000</p>
 <p>To solve this I fill all covered positions, taking care to remove Beacons from the count</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cover</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">beacons</span><span class="p">):</span>
    <span class="n">overlap</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">beacons</span><span class="p">:</span>
        <span class="n">dd</span> <span class="o">=</span> <span class="n">d</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">row</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">overlap</span><span class="p">.</span><span class="n">update</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">dd</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dd</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">row</span><span class="p">:</span>
            <span class="n">overlap</span><span class="p">.</span><span class="n">remove</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">covered</span><span class="p">)</span>
</code></pre></div></div>
 <p><strong>Part2</strong></p>
 <p>Now it asked to search for a single gap in coverage over the range (0, lim) in both x and y. I tried using the original cover function for this, but I only reached 6 rows / second. and with 4000000, I didnâ€™t feel like waiting that long.</p>
 <p>Instead, I keep track of the covered ranges [(x0, x1), â€¦ ] for a row at a time. When adding a beacon, I make sure to merge any overlapping coverages.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">calc_covers</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">beacons</span><span class="p">,</span> <span class="n">lim</span><span class="p">):</span>
    <span class="n">covers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">beacons</span><span class="p">:</span>
        <span class="n">dd</span> <span class="o">=</span> <span class="n">d</span> <span class="o">-</span> <span class="nb">abs</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">row</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">dd</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">x</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">dd</span><span class="p">),</span> <span class="nb">min</span><span class="p">(</span><span class="n">lim</span><span class="p">,</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">dd</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">covers</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">covers</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">continue</span>

        <span class="c1"># Now remove covers
</span>        <span class="n">covers</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">covers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">covers</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">covers</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">covers</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">idx</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">covers</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
        <span class="n">covers</span> <span class="o">=</span> <span class="n">covers</span><span class="p">[:</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">covers</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">covers</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">lim</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">covers</span>
    <span class="k">return</span> <span class="n">covers</span>
</code></pre></div></div>
 <p>Now part2 is solved:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">part2</span><span class="p">(</span><span class="n">lim</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">beacons</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lim</span><span class="p">):</span>
        <span class="n">overlap</span> <span class="o">=</span> <span class="n">calc_covers</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">beacons</span><span class="p">,</span> <span class="n">lim</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">overlap</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">4000000</span> <span class="o">*</span> <span class="n">overlap</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">row</span>
</code></pre></div></div>
 <p>This takes about 30s instead of something like 200hâ€¦
I feel like I could have used an <a href="https://en.wikipedia.org/wiki/Interval_tree">Interval Tree</a> but my simple approach worked sufficiently fast for the problem at hand.</p>
</details>
<h2 id="day-16---proboscidea-volcanium">Day 16 - Proboscidea Volcanium</h2>
<ul>
 <li><a href="https://adventofcode.com/2022/day/16">AOC Day 16 link</a></li>
 <li><a href="https://github.com/thomasburgess/advent2022/blob/main/day16.py">code link</a></li>
</ul>
<p>I really struggled with part2 of this problemâ€¦</p>
<details>
  <summary><i>Click to expand Day16 solution</i><br />&nbsp;<br /></summary>
 <p>The data is a maze of tunnels with valves that has a flow rate in units/minute.</p>
 <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Valve AA has flow rate=0; tunnels lead to valves DD, II, BB
Valve BB has flow rate=13; tunnels lead to valves CC, AA
</code></pre></div></div>
 <p>This is nice to parse with <a href="https://docs.python.org/3/library/re.html#functions"><code class="highlighter-rouge">re.split</code></a> as follows.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">re</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Iterator</span>

<span class="n">VALVES_T</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span> <span class="p">:</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]]]</span>
<span class="k">def</span> <span class="nf">read_valves</span><span class="p">(</span><span class="n">path</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">VALVES_T</span><span class="p">:</span>
    <span class="n">valves</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s">"r"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="n">v</span><span class="p">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]:</span> <span class="p">(</span>
                <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">"rate=|; "</span><span class="p">,</span> <span class="n">v</span><span class="p">)[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="n">re</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="s">"valves|valve"</span><span class="p">,</span> <span class="n">v</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="n">replace</span><span class="p">(</span><span class="s">","</span><span class="p">,</span> <span class="s">""</span><span class="p">).</span><span class="n">split</span><span class="p">(),</span>
            <span class="p">)</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">f</span><span class="p">.</span><span class="n">readlines</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">v</span><span class="p">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="p">}</span>
</code></pre></div></div>
 <p>(later I realized this could be achived with a single splitâ€¦ but this works just fine as is).</p>
 <p><strong>Task 1</strong></p>
 <p>An explorer starts at valve <code class="highlighter-rouge">AA</code>, can walk for 1 minute through a tunnel, or open a valve for 1 minute. All valves start closed. What is the highest output throught the valves that can be achieved in 30 mins.</p>
 <p>These possibilities are encoded in <code class="highlighter-rouge">generate_steps</code>:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generate_steps</span><span class="p">(</span><span class="n">valves</span><span class="p">:</span> <span class="n">VALVES_T</span><span class="p">,</span> <span class="n">c</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opened</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterator</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">])]:</span>
    <span class="c1"># Explore tunnels
</span>    <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">valves</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">1</span><span class="p">]:</span>
        <span class="k">yield</span> <span class="n">v</span><span class="p">,</span> <span class="n">opened</span>
    <span class="c1"># Open valve
</span>    <span class="k">if</span> <span class="n">valves</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">c</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">opened</span><span class="p">:</span>
        <span class="k">yield</span> <span class="n">c</span><span class="p">,</span> <span class="n">opened</span> <span class="o">|</span> <span class="nb">set</span><span class="p">((</span><span class="n">c</span><span class="p">,))</span>
</code></pre></div></div>
 <p>with which the tunnels can be explored using <code class="highlighter-rouge">search</code>:</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">search</span><span class="p">(</span>
    <span class="n">valves</span><span class="p">:</span> <span class="n">VALVES_T</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">opened</span><span class="p">:</span> <span class="nb">set</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">search_type</span><span class="p">:</span>
    <span class="n">seen</span> <span class="o">=</span> <span class="p">{</span><span class="n">start</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
    <span class="n">queue</span> <span class="o">=</span> <span class="n">collections</span><span class="p">.</span><span class="n">deque</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="p">[</span><span class="n">start</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="n">opened</span><span class="p">)])</span>
    <span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">while</span> <span class="n">queue</span><span class="p">:</span>
        <span class="n">t</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">pressure</span><span class="p">,</span> <span class="n">opened</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">path</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="n">steps</span><span class="p">:</span>
            <span class="n">paths</span><span class="p">.</span><span class="n">append</span><span class="p">((</span><span class="n">pressure</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">opened</span><span class="p">))</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">seen</span><span class="p">.</span><span class="n">get</span><span class="p">((</span><span class="n">t</span><span class="p">,</span> <span class="n">c</span><span class="p">),</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="n">pressure</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">seen</span><span class="p">[(</span><span class="n">t</span><span class="p">,</span> <span class="n">c</span><span class="p">)]</span> <span class="o">=</span> <span class="n">pressure</span>
        <span class="n">pressure</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">valves</span><span class="p">[</span><span class="n">o</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">opened</span><span class="p">)</span>
        <span class="n">queue</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="p">(</span><span class="n">t</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">path</span> <span class="o">+</span> <span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">pressure</span> <span class="o">+</span> <span class="p">(</span><span class="n">valves</span><span class="p">[</span><span class="n">c</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">c</span> <span class="k">else</span> <span class="mi">0</span><span class="p">),</span> <span class="n">o</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">generate_steps</span><span class="p">(</span><span class="n">valves</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">opened</span><span class="p">)</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">paths</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>
 <p>This works and givesd a result in less than a second.</p>
 <p><strong>Task 2</strong></p>
 <p>I spent a lot of time trying to adapt <code class="highlighter-rouge">search</code> for reusue, but I kept getting the wrong answer. At the end of the day i resorted to nested for loops. This was crazy slow for the input data set though. Frustrated enough, I picked up a quick and dirty pruning trick from <a href="https://vis.social/@llimllib">llimllib</a>.</p>
 <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">search_elephant</span><span class="p">(</span><span class="n">valves</span><span class="p">:</span> <span class="n">VALVES_T</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s">"AA"</span><span class="p">,</span> <span class="n">steps</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">26</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="n">frontier</span> <span class="o">=</span> <span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">),</span> <span class="nb">set</span><span class="p">())]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">steps</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">:</span>
            <span class="c1"># it _works_ with my data...
</span>            <span class="c1"># A priority queue would have been a little nicer
</span>            <span class="n">frontier</span><span class="p">.</span><span class="n">sort</span><span class="p">(</span><span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
            <span class="n">frontier</span> <span class="o">=</span> <span class="n">frontier</span><span class="p">[:</span><span class="mi">5000</span><span class="p">]</span>
        <span class="n">update</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">pressure</span><span class="p">,</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">),</span> <span class="n">opened</span> <span class="ow">in</span> <span class="n">frontier</span><span class="p">:</span>
            <span class="n">pressure</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">valves</span><span class="p">[</span><span class="n">o</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">opened</span><span class="p">)</span>
            <span class="n">update</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span>
                <span class="p">(</span><span class="n">pressure</span><span class="p">,</span> <span class="p">(</span><span class="n">ia</span><span class="p">,</span> <span class="n">ib</span><span class="p">),</span> <span class="n">ob</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ia</span><span class="p">,</span> <span class="n">oa</span> <span class="ow">in</span> <span class="n">generate_steps</span><span class="p">(</span><span class="n">valves</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">opened</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">ib</span><span class="p">,</span> <span class="n">ob</span> <span class="ow">in</span> <span class="n">generate_steps</span><span class="p">(</span><span class="n">valves</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">oa</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="n">frontier</span> <span class="o">=</span> <span class="n">update</span>
    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">frontier</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></div></div>
</details>
<h2 id="the-rest-of-the-days">The rest of the days</h2>
<p>I did not have the time to go on this year, maybe I will have better luck next year.</p>
			</article>
		</div>
	</main><nav aria-label="Navigation" class="container-lg chulapa-pagination  ">
 <ul class="col-lg-8 offset-lg-2 pagination chulapa-pagination-round px-0 ">
   <li class="page-item text-left mr-0 ">
      <a class="page-link border-0 px-4" href="https://thomasburgess.github.io/2022/10/15/Fish-tiles.html" tabindex="-1">
	  <i class="fa fa-chevron-left" aria-hidden="true"></i><span class="sr-only">Previous</span>
	  </a>
   </li>
   <li class="page-item border-0 disabled text-left ml-0 mr-auto d-none d-md-inline ">
     <p class="page-link chulapa-label">Fun with fish tiles</p>
   </li>
   <li class="page-item border-0 disabled text-left ml-0 mr-auto d-none d-sm-inline d-md-none ">
     <p class="page-link chulapa-label">Fun with fish ...</p>
   </li>
	 <li class="page-item disabled mx-auto invisible">
	  <p class="page-link">|</p>
	 </li>	
	 <li class="page-item border-0 disabled text-right mr-0 ml-auto d-none d-sm-inline d-md-none ">
	   <p class="page-link chulapa-label">Optimizing mat...</p>
	 </li>
	 <li class="page-item border-0 disabled text-right mr-0 ml-auto d-none d-md-inline ">
	   <p class="page-link chulapa-label">Optimizing matrix multiplic...</p>
	 </li>
   <li class="page-item text-right ml-0 ">
      <a class="page-link border-0 px-4" href="https://thomasburgess.github.io/2023/02/02/Matrix_Multiplication.html">
	  <i class="fa fa-chevron-right" aria-hidden="true"></i><span class="sr-only">Next</span></a>
   </li>
 </ul>
</nav>
<div class="container-lg my-1">
 <div class="row">
   <div class="col-lg-8 offset-lg-2 col">
      <i class="far fa-folder-open fa-xs" aria-hidden="true"></i>
      <a href="https://thomasburgess.github.io/categories#blog" class="badge chulapa-pill-bg-secondary p-category" rel="tag">blog</a>
      <a href="https://thomasburgess.github.io/categories#advent" class="badge chulapa-pill-bg-secondary p-category" rel="tag">advent</a>
      <a href="https://thomasburgess.github.io/categories#code" class="badge chulapa-pill-bg-secondary p-category" rel="tag">code</a>
     </div>
   </div>
</div>
<div class="container-lg my-1">
 <div class="row">
   <div class="col-lg-8 offset-lg-2 col">
      <i class="fas fa-tag mr-1 fa-xs" aria-hidden="true"></i>
      <a href="https://thomasburgess.github.io/tags#coding" class="badge chulapa-pill-bg-primary p-category" rel="tag" >coding</a>
      <a href="https://thomasburgess.github.io/tags#advent" class="badge chulapa-pill-bg-primary p-category" rel="tag" >advent</a>
      <a href="https://thomasburgess.github.io/tags#python" class="badge chulapa-pill-bg-primary p-category" rel="tag" >python</a>
     </div>
   </div>
</div>
<div class="container-lg mt-1 mb-2">
 <div class="row">
   <div class="col-lg-8 offset-lg-2">
     <hr>
     <p><i class="fa-solid fa-shuffle fa-xl"></i><span class="sr-only">Related</span></p>
     <nav class="card-group" aria-label="related-articles">
        <div class="card  border chulapa-related">
         <div class="card-body">
         <p class="card-title chulapa-headingfont"><a href="https://thomasburgess.github.io/2023/12/01/advent2023.html" class="chulapa-text-body-color">Advent of Code 2023</a></p>
         <p class="card-text"><small>A new problem, every day, all of december.</small></p></div>
   <div class="card-footer bg-transparent">
      <small><i class="far fa-calendar" aria-hidden="true"></i> <time datetime="2023-12-01T00:00:00+01:00">december 01, 2023</time></small>
   </div>
 </div>
        <div class="card ml-sm-1 border chulapa-related">
         <div class="card-body">
         <p class="card-title chulapa-headingfont"><a href="https://thomasburgess.github.io/2024/11/04/Passwords-with-Polars.html" class="chulapa-text-body-color">Passwords with Polars</a></p>
         <p class="card-text"><small>Wrangling csv password manager exports</small></p></div>
   <div class="card-footer bg-transparent">
      <small><i class="far fa-calendar" aria-hidden="true"></i> <time datetime="2024-11-04T00:00:00+01:00">november 04, 2024</time></small>
   </div>
 </div>
        <div class="card ml-sm-1 border chulapa-related">
         <div class="card-body">
         <p class="card-title chulapa-headingfont"><a href="https://thomasburgess.github.io/2023/02/02/Matrix_Multiplication.html" class="chulapa-text-body-color">Optimizing matrix multiplication</a></p>
         <p class="card-text"><small>Speeding up sloww matrix operations in python</small></p></div>
   <div class="card-footer bg-transparent">
      <small><i class="far fa-calendar" aria-hidden="true"></i> <time datetime="2023-02-02T00:00:00+01:00">february 02, 2023</time></small>
   </div>
 </div></nav>
   </div>
 </div>
</div><!-- Footer -->
 <footer class="footer-chulapa text-center mt-0 pt-3">
   <div class="container">
         <div class="row">
           <div class="col-lg-8 offset-lg-2">
         <script src="https://giscus.app/client.js" data-repo="thomasburgess/thomasburgess.github.io"
  data-repo-id="MDEwOlJlcG9zaXRvcnkzNzQ0MDI0Mzg=" data-category="General" data-category-id="DIC_kwDOFlDths4Cj1pu"
  data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top"
  data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy" crossorigin="anonymous" async>
  </script>
           </div>
        </div>
      </div>
   <div class="container">
     <div class="row">
       <div class="col-xl-10 offset-xl-1"><div role="navigation" class="d-flex flex-wrap justify-content-center"><a href="https://github.com/thomasburgess" title="footerRepo on Github" class="chulapa-footer-sociallink lead"><span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span><span class="sr-only">Repo on Github</span>
            </a><a href="https://thomasburgess.github.io/atom.xml" title="footerRSS" class="chulapa-footer-sociallink lead"><span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span><span class="sr-only">RSS</span>
            </a></div><p class="mt-2 mb-3">&copy; 2025 Thomas T Burgess</p>
          <!-- Do not remove this in order to give  attributions -->
         <p class="chulapa-footer-brand">Powered by <a href="https://dieghernan.github.io/chulapa"> <span class="chulapa">Chulapa</span> Jekyll Theme</a><br><b>Minty</b> skin by <a href="https://bootswatch.com/">Bootswatch</a></p>
          <!-- End  attributions -->
       </div>
     </div>
 </div>
</footer>
<!-- Footer -->
<!-- JS, Popper.js, and jQuery -->
	<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/gh/dieghernan/chulapa@master/assets/js/chulapa_script.js"></script>
	<!-- start custom scripts to be placed at the bottom of the page -->
<!-- end custom bottom scripts -->
	</body>
</html>
